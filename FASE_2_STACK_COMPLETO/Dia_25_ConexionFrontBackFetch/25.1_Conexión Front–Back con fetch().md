
# üß© Conexi√≥n Front‚ÄìBack con fetch()

Ver√°s c√≥mo mostrar tareas desde tu API FastAPI en el frontend React usando fetch() y useEffect.

---

## üìö Clase 25 ‚Äî Mostrar tareas en React con fetch y useEffect

### üí°  Qu√© debes ENTENDER (no memorizar)
	‚Ä¢	Qu√© hace fetch() ‚Üí Llama a una API desde JS.
	‚Ä¢	Qu√© hace useEffect() ‚Üí Ejecuta c√≥digo cuando el componente se monta.
	‚Ä¢	Qu√© es el estado (useState) ‚Üí Guarda los datos que llegan.
	‚Ä¢	C√≥mo se muestran las tareas en una lista en el frontend.
	‚Ä¢	C√≥mo se enlaza el backend FastAPI con React sin complicaciones.

---

## üß† Esquema visual del flujo
```jsx
React App        ‚áÑ        FastAPI (main.py)
  ‚Üì useEffect()                ‚Üë
  fetch("/tareas") ‚Üí   [API responde con JSON]
  ‚Üì
  setTareas(data)
  ‚Üì
  .map() para mostrar
```

---


## üîÄ ORDEN IDEAL DE TRABAJO
| Paso | Acci√≥n                                                       | ¬øPor qu√© es importante?                                  |
|----|--------------------------------------------------------------|------------------------------------------------------------|
|  1.| Crear carpeta del proyecto general (`mi-proyecto/`)          | Para tener todo organizado en un solo sitio.               |
| 2. | Crear el entorno virtual Python (`python3 -m venv env`)      | A√≠slas dependencias del backend FastAPI.                   |
| 3. | Activar el entorno (`source env/bin/activate`)               | Para instalar FastAPI y usar uvicorn, etc.                 |
| 4. | Crear carpeta `backend/` y tu `main.py`, `requirements.txt`  | Backend separado y limpio.                                 |
| 5. | Crear carpeta `frontend/` y usar tu `newreact.sh` ah√≠        | Mantienes el frontend aislado con su propio `node_modules/`|


## üéØ Resultado ideal de estructura
```
mi-proyecto/
‚îú‚îÄ‚îÄ backend/              ‚Üê FastAPI aqu√≠
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ env/              ‚Üê Entorno virtual
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ frontend/             ‚Üê React generado con tu script
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx
‚îÇ   ‚îú‚îÄ‚îÄ node_modules/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ README.md             ‚Üê (opcional pero √∫til)
```

---
## üõ† Paso a paso

### 1. Arranca tu backend FastAPI
```bash
uvicorn main:app --reload
```
>Confirma que tienes un endpoint GET /tareas que devuelve un JSON como:
```json
[
  { "id": 1, "titulo": "Aprender React", "done": false },
  { "id": 2, "titulo": "Practicar Pytest", "done": true }
]
```

---

### 2. Estructura tu componente React
```jsx
// App.jsx
import { useState, useEffect } from "react";

function App() {
  const [tareas, setTareas] = useState([]);

  useEffect(() => {
    fetch("http://localhost:8000/tareas")
      .then((res) => res.json())
      .then((data) => setTareas(data))
      .catch((error) => console.error("Error:", error));
  }, []);

  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold mb-4">üìã Lista de Tareas</h1>
      <ul className="space-y-2">
        {tareas.map((tarea) => (
          <li
            key={tarea.id}
            className={`p-4 rounded shadow ${tarea.done ? "bg-green-100" : "bg-yellow-100"}`}
          >
            ‚úÖ {tarea.titulo}
          </li>
        ))}
      </ul>
    </div>
  );
}

export default App;
```
---

## ‚úÖ PASO A PASO ‚Äî Ver tu p√°gina en tiempo real (frontend)
# ‚úÖ PASO A PASO ‚Äî Backend + Frontend conectados (Clase 25)

| Paso | Acci√≥n                                                   | Comando / Notas                                                                                                                                         |
|------|-----------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1    | Crear estructura de carpetas                              | `mkdir entorno25 && cd entorno25 && mkdir backend && cd backend`                                                                                       |
| 2    | Crear entorno virtual Python                              | `python3 -m venv env`                                                                                                                                   |
| 3    | Activar entorno virtual                                   | `source env/bin/activate`                                                                                                                               |
| 4    | Crear `requirements.txt` con VSCode                       | `code requirements.txt` ‚Üí luego insertar el snippet global de dependencias (`fastapi`, `sqlmodel`, `uvicorn`, etc.)                                   |
| 5    | Instalar dependencias del backend                         | `pip install -r requirements.txt`                                                                                                                       |
| 6    | Crear y abrir `main.py`                                   | `code main.py` ‚Üí insertar el snippet global de **FastAPI + SQLModel CRUD (Tareas)**                                                                    |
| 7    | Insertar CORS para conectar frontend                      | Insertar el snippet `CORS Middleware` **despu√©s de `app = FastAPI()`**                                                                                 |
| 8    | Ejecutar el servidor de la API (FastAPI)                  | `uvicorn main:app --reload`                                                                                                                             |
| 9    | Copiar script de React boilerplate (`newreact.sh`)       | `cp newreact.sh entorno25/`                                                                                                                             |
| 10   | Volver a la ra√≠z del proyecto                             | `cd ..` (desde `/backend` a `/entorno25`)                                                                                                               |
| 11   | Generar proyecto React                                     | `./newreact.sh frontend`                                                                                                                                |
| 12   | Iniciar el frontend React                                 | `cd frontend` ‚Üí `npm run dev`                                                                                                                           |
| 13   | Abrir la web en navegador                                 | Visita üëâ `http://localhost:5173` (o el puerto que indique la consola)                                                                                   |
| 14   | Ir a `frontend/src/App.jsx`                               | Reemplaza el contenido con el snippet `react.fetch.lista.generica`                                                                                      |
| 15   | Cambiar la URL en `fetch()`                               | Usa `http://localhost:8000/tareas` (la URL del backend FastAPI)                                                                                        |
| 16   | Probar conexi√≥n con un POST manual                        | Ejecuta desde terminal:<br>`curl -X POST http://localhost:8000/tareas \`<br>`-H "Content-Type: application/json" \`<br>`-d '{"titulo": "Aprender FastAPI", "done": false}'` |
| 17   | Recargar el navegador                                     | Visita el frontend y pulsa ‚ÄúüîÅ Refrescar‚Äù ‚Üí Ver√°s la tarea **‚ÄúAprender FastAPI‚Äù** mostrada con fondo amarillo (pendiente)                             |
---


## üí° ¬øPor qu√© funciona?
	‚Ä¢	useEffect() se ejecuta una sola vez al montar el componente.
	‚Ä¢	fetch() va al backend FastAPI y pide /tareas.
	‚Ä¢	Al recibir el JSON, usamos setTareas(data) para actualizar el estado.
	‚Ä¢	El .map() renderiza cada tarea como una <li> con estilos.

---

## üìã Checklist de comprensi√≥n

| ¬øLo entiendes? | Pregunta                                         | Respuesta                                       |
|----------------|--------------------------------------------------|-------------------------------------------------|
| S√≠ / No        | ¬øQu√© hace fetch()?                               | Llama a la API y espera una respuesta           |
| S√≠ / No        | ¬øD√≥nde se guarda el JSON recibido?               | En el useState                                  |
| S√≠ / No        | ¬øQu√© dispara useEffect()?                        | El montaje del componente                       |
| S√≠ / No        | ¬øQu√© hace .map()?                                | Itera sobre las tareas para mostrarlas          |
| S√≠ / No        | ¬øD√≥nde se ven los errores?                       | En la consola del navegador                     |


---

## üìö Tabla de conceptos ‚Äî Clase 25

| üß© Concepto       | üìñ Explicaci√≥n t√©cnica                                  | üí¨ Explicaci√≥n coloquial                                      |
|-------------------|--------------------------------------------------------|---------------------------------------------------------------|
| fetch()           | Funci√≥n para hacer peticiones HTTP desde JS             | üì° ‚ÄúEl mensajero que va a la API a pedir datos.‚Äù              |
| useEffect()       | Hook que se ejecuta tras renderizar el componente       | ‚è∞ ‚ÄúHaz esto justo cuando aparezca en pantalla.‚Äù               |
| useState()        | Hook que guarda valores reactivos                       | üß† ‚ÄúLa memoria de tu componente.‚Äù                             |
| .map()            | Recorre arrays y devuelve elementos JSX                 | ü™Ñ ‚ÄúConvierte una lista en componentes visuales.‚Äù              |
| üì¶ **res.json()**     | üîÑ Convierte respuesta en objeto JS            | üì¶ ‚ÄúAbre el paquete que llega.‚Äù                  |
| üìù **setTareas()**    | üîÅ Cambia el estado con nuevas tareas          | üîÑ ‚ÄúActualiza lo que se ve.‚Äù                     |
| üß∑ **key={...}**      | üÜî Identificador √∫nico en .map()               | üè∑ ‚ÄúEtiqueta para no duplicar elementos.‚Äù        |
| üè† **localhost:8000** | üåê URL local del backend FastAPI               | üñ• ‚ÄúTu servidor corriendo en casa.‚Äù              |
| üìÉ **GET /tareas**    | üì• Ruta que devuelve la lista de tareas        | üìã ‚ÄúLa lista entera de cosas por hacer.‚Äù         |


---

## üéØ Con esto ya puedes:
	‚Ä¢	Leer datos reales del backend desde React
	‚Ä¢	Mostrar una lista din√°mica de tareas en tu frontend
	‚Ä¢	Entender los 3 hooks clave en React: useState, useEffect, map

---

Perfecto. Vamos con los Ejercicios pr√°cticos guiados de la Clase 25 ‚Äì React + FastAPI (fetch + useEffect). Al final te generar√© los dos archivos .code-snippets como los tienes organizado por VS Code.

---

## üß™ Ejercicios pr√°cticos guiados ‚Äî Clase 25

---

### üß© Ejercicio 1 ‚Äì Mostrar ‚ÄúPendiente‚Äù o ‚ÄúHecho‚Äù seg√∫n el campo done

##### üéØ Objetivo: Mostrar el estado de cada tarea con texto legible para humanos.

##### üì• Entrada esperada desde la API:
```json
{ "titulo": "Estudiar React", "done": true }
```
##### üß† L√≥gica:
	‚Ä¢	Si done es true ‚Üí mostrar ‚Äú‚úÖ Hecho‚Äù
	‚Ä¢	Si done es false ‚Üí mostrar ‚Äú‚è≥ Pendiente‚Äù

##### ‚úÖ Paso a paso:
```jsx
// 1. Localiza este trozo en el .map():
    {tarea.titulo}
```
```jsx
// 2. Modif√≠calo as√≠:
    {tarea.titulo} ‚Äì {tarea.done ? "‚úÖ Hecho" : "‚è≥ Pendiente"}
```

---

### üß© Ejercicio 2 ‚Äì A√±adir un bot√≥n ‚ÄúRefrescar‚Äù que vuelva a hacer fetch

##### üéØ Objetivo: Poder actualizar la lista de tareas sin recargar toda la p√°gina.

##### üß† L√≥gica:
	‚Ä¢	Crear una funci√≥n loadTareas()
	‚Ä¢	Reutilizar fetch() dentro de esa funci√≥n
	‚Ä¢	A√±adir bot√≥n con onClick={loadTareas}

##### ‚úÖ Paso a paso:
```jsx
// 1. Mueve la l√≥gica de fetch() a una nueva funci√≥n:
function loadTareas() {
  fetch("http://localhost:8000/tareas")
    .then((res) => res.json())
    .then((data) => setTareas(data));
}
```
```jsx
// 2. En useEffect, llama a loadTareas():
useEffect(() => {
  loadTareas();
}, []);
```
```jsx
//3. A√±ade este bot√≥n encima de la lista:
<button
  onClick={loadTareas}
  className="mb-4 px-4 py-2 bg-blue-500 text-white rounded"
>
  üîÅ Refrescar
</button>
```

---

### üß© Ejercicio 3 ‚Äì Mostrar mensaje ‚ÄúCargando‚Ä¶‚Äù mientras se obtienen los datos

##### üéØ Objetivo: Indicar visualmente que los datos est√°n siendo cargados.

##### üß† L√≥gica:
	‚Ä¢	A√±adir un nuevo estado cargando
	‚Ä¢	Al empezar fetch ‚Üí setCargando(true)
	‚Ä¢	Al terminar ‚Üí setCargando(false)
	‚Ä¢	Mostrar <p>Cargando tareas...</p> si cargando === true

##### ‚úÖ Paso a paso:
```jsx
// 1. Crea el estado:
const [cargando, setCargando] = useState(false);
```
```jsx
// 2. Modifica loadTareas():
function loadTareas() {
  setCargando(true);
  fetch("http://localhost:8000/tareas")
    .then((res) => res.json())
    .then((data) => setTareas(data))
    .finally(() => setCargando(false));
}
```
```jsx
// 3. En el return, antes de mapear:
{cargando ? (
  <p className="text-gray-500">‚è≥ Cargando tareas...</p>
) : (
  <ul className="space-y-2">
    {tareas.map((tarea) => (
      <li
        key={tarea.id}
        className={`p-4 rounded shadow ${tarea.done ? "bg-green-100" : "bg-yellow-100"}`}
      >
        ‚úÖ {tarea.titulo} ‚Äì {tarea.done ? "Hecho" : "Pendiente"}
      </li>
    ))}
  </ul>
)}
```

---


## ‚úÖ CONTENIDO CUBIERTO DEL D√çA 25

| Tema                                   | Ejercicio                                                   |
|----------------------------------------|-------------------------------------------------------------|
| Conexi√≥n Front‚ÄìBack                    | Ejercicio 1‚Äì3 (fetch(), useEffect)                          |
| Mostrar datos con useEffect()          | Ejercicio 1 + estructura base                               |
| Llamar a una API (fetch)               | Ejercicio 2 (loadTareas)                                    |
| Guardar datos con useState()           | Todos                                                       |
| Mostrar lista con .map()               | En todos los renders                                        |
| Controlar estados (loading)            | Ejercicio 3 (cargando)                                      |
| Actualizar datos con bot√≥n              | Ejercicio 2                                                 |
| Mostrar estados personalizados (done) | Ejercicio 1                                                 |
| Estilo visual con Tailwind              | En todos (clases como bg-green-100, rounded, p-8)           |


---

## üß† ¬øY qu√© no hace falta hacer?
	‚Ä¢	No necesitas tocar main.py si ya tienes /tareas funcionando.
	‚Ä¢	No se pide crear tareas desde el frontend a√∫n (eso ser√° otro d√≠a).
	‚Ä¢	Tampoco se piden formularios ni DELETE por ahora.

---

## üìå ¬øQu√© se recomienda para consolidar?
	‚Ä¢	Que pruebes cambiar el endpoint (por ejemplo /productos) y ajustarlo.
	‚Ä¢	Que hagas un mini reto por tu cuenta: mostrar cu√°ntas tareas hay en total (ej. Total: 5 tareas).
	‚Ä¢	Que a√±adas control de errores si el servidor est√° ca√≠do (con try...catch o .catch() m√°s elaborado).




